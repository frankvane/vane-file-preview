# ğŸ—‚ï¸ Vane File Preview

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€é«˜åº¦å¯æ‰©å±•çš„ React æ–‡ä»¶é¢„è§ˆç»„ä»¶åº“

[![NPM Version](https://img.shields.io/badge/npm-v1.0.0-blue)](https://www.npmjs.com/package/vane-file-preview)
[![License](https://img.shields.io/badge/license-MIT-green)](./LICENSE)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-18.x-blue)](https://reactjs.org/)

[åœ¨çº¿æ¼”ç¤º](https://chinavane.netlify.app/) | [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) | [æ’ä»¶åˆ—è¡¨](#æ’ä»¶åˆ—è¡¨) | [API æ–‡æ¡£](#api-æ–‡æ¡£)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ”Œ **æ’ä»¶åŒ–æ¶æ„**

- åŸºäºäº‹ä»¶æ€»çº¿çš„æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒçµæ´»ç»„åˆ
- 15+ å†…ç½®é¢„è§ˆæ’ä»¶ï¼Œè¦†ç›–ä¸»æµæ–‡ä»¶æ ¼å¼
- æ˜“äºæ‰©å±•ï¼Œæ”¯æŒè‡ªå®šä¹‰æ’ä»¶å¼€å‘

### ğŸ“„ **ä¸°å¯Œçš„æ–‡ä»¶æ ¼å¼æ”¯æŒ**

- **æ–‡æ¡£ç±»**ï¼šPDFã€Word (DOCX)ã€PowerPoint (PPTX)ã€Excel (XLSX)ã€Markdownã€EPUB
- **ä»£ç ç±»**ï¼šJavaScriptã€TypeScriptã€Pythonã€Javaã€CSSã€HTML ç­‰ 180+ è¯­è¨€
- **æ•°æ®ç±»**ï¼šJSONã€CSVã€TSV ç­‰ç»“æ„åŒ–æ•°æ®
- **åª’ä½“ç±»**ï¼šå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘
- **å‹ç¼©åŒ…**ï¼šZIP æ–‡ä»¶å†…å®¹é¢„è§ˆ

### âš¡ **æ€§èƒ½ä¼˜åŒ–**

- æ‡’åŠ è½½æœºåˆ¶ï¼ŒæŒ‰éœ€æ¸²æŸ“
- è™šæ‹Ÿæ»šåŠ¨æ”¯æŒå¤§æ–‡ä»¶é¢„è§ˆ
- å†…å­˜ç¼“å­˜ä¼˜åŒ–
- æ”¯æŒæ–‡ä»¶æµå¼åŠ è½½
- å“åº”å¼è®¾è®¡ï¼Œé€‚é…å„ç§å±å¹•å°ºå¯¸

### ğŸ›¡ï¸ **ç¨³å¥æ€§**

- å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
- æ–‡ä»¶æ ¼å¼è‡ªåŠ¨æ£€æµ‹
- é™çº§é¢„è§ˆç­–ç•¥
- TypeScript ç±»å‹å®‰å…¨

### ğŸ¨ **ç”¨æˆ·ä½“éªŒ**

- ç»Ÿä¸€çš„é¢„è§ˆç•Œé¢è®¾è®¡
- ä¸»é¢˜åˆ‡æ¢æ”¯æŒï¼ˆäº®è‰²/æš—è‰²/è‡ªåŠ¨ï¼‰
- è¯­æ³•é«˜äº®ã€ä»£ç æŠ˜å 
- æœç´¢ã€å¯¼èˆªã€ç¼©æ”¾ç­‰äº¤äº’åŠŸèƒ½
- å¯è®¿é—®æ€§æ”¯æŒ

---

## ğŸ“¦ å®‰è£…

### NPM / Yarn / PNPM

```bash
# npm
npm install vane-file-preview

# yarn
yarn add vane-file-preview

# pnpm
pnpm add vane-file-preview
```

### æœ¬åœ°å¼€å‘

å¦‚æœæ‚¨æƒ³æœ¬åœ°è¿è¡Œæ¼”ç¤ºç«™ç‚¹æˆ–è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼š

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/frankvane/vane-file-preview.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd vane-file-preview

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆæ„å»ºäº§ç‰©
npm run preview
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨

æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œä¸å¸¦ä»»ä½•æ’ä»¶ï¼š

```tsx
import { FilePreviewCore } from "vane-file-preview";

function App() {
  const fileInfo = {
    name: "example.pdf",
    url: "/path/to/example.pdf",
    size: 1024000,
    type: "application/pdf",
  };

  return (
    <div style={{ width: "100%", height: "600px" }}>
      <FilePreviewCore
        file={fileInfo}
        onLoadStart={() => console.log("å¼€å§‹åŠ è½½")}
        onLoadSuccess={() => console.log("åŠ è½½æˆåŠŸ")}
        onLoadError={(error) => console.error("åŠ è½½å¤±è´¥", error)}
      />
    </div>
  );
}
```

### ä½¿ç”¨æ’ä»¶

é€šè¿‡ `withPlugins` é«˜é˜¶ç»„ä»¶ç»„åˆå¤šä¸ªé¢„è§ˆæ’ä»¶ï¼š

```tsx
import {
  FilePreviewCore,
  withPlugins,
  createPdfPreviewPlugin,
  createImagePreviewPlugin,
  createJsonPreviewPlugin,
} from "vane-file-preview";

// ç»„åˆæ’ä»¶
const FilePreview = withPlugins(FilePreviewCore, [
  createPdfPreviewPlugin({
    enableTextSelection: true,
    scale: 1.2,
  }),
  createImagePreviewPlugin({
    enableZoom: true,
    enableRotation: true,
  }),
  createJsonPreviewPlugin({
    theme: "auto",
    enableSearch: true,
    collapsed: false,
  }),
]);

function App() {
  const fileInfo = {
    name: "data.json",
    url: "/path/to/data.json",
    size: 2048,
    type: "application/json",
  };

  return (
    <div style={{ width: "100%", height: "600px" }}>
      <FilePreview
        file={fileInfo}
        containerStyle={{ border: "1px solid #ddd", borderRadius: 8 }}
      />
    </div>
  );
}
```

### å®Œæ•´ç¤ºä¾‹ï¼šå¤šæ ¼å¼æ–‡ä»¶é¢„è§ˆå™¨

```tsx
import {
  FilePreviewCore,
  withPlugins,
  createPdfPreviewPlugin,
  createImagePreviewPlugin,
  createJsonPreviewPlugin,
  createCodePreviewPlugin,
  createMarkdownPreviewPlugin,
  createDocxPreviewPlugin,
  createXlsxPreviewPlugin,
  createVideoPreviewPlugin,
  createAudioPreviewPlugin,
  createZipPreviewPlugin,
} from "vane-file-preview";

const UniversalFilePreview = withPlugins(FilePreviewCore, [
  // æ–‡æ¡£é¢„è§ˆ
  createPdfPreviewPlugin(),
  createDocxPreviewPlugin(),
  createXlsxPreviewPlugin(),

  // ä»£ç é¢„è§ˆ
  createCodePreviewPlugin({
    theme: "github",
    showLineNumbers: true,
    enableCodeFolding: true,
  }),
  createMarkdownPreviewPlugin({
    enableMath: true,
    enableMermaid: true,
  }),

  // æ•°æ®é¢„è§ˆ
  createJsonPreviewPlugin({
    theme: "auto",
    enableSearch: true,
  }),

  // åª’ä½“é¢„è§ˆ
  createImagePreviewPlugin({
    enableZoom: true,
    enableRotation: true,
  }),
  createVideoPreviewPlugin({
    controls: true,
    autoplay: false,
  }),
  createAudioPreviewPlugin({
    showPlaylist: true,
  }),

  // å‹ç¼©åŒ…é¢„è§ˆ
  createZipPreviewPlugin({
    maxDepth: 3,
    showFileSize: true,
  }),
]);

export default function FilePreviewDemo() {
  const [selectedFile, setSelectedFile] = useState(null);

  const handleFileSelect = (event) => {
    const file = event.target.files[0];
    if (file) {
      setSelectedFile({
        name: file.name,
        url: URL.createObjectURL(file),
        size: file.size,
        type: file.type,
      });
    }
  };

  return (
    <div style={{ padding: 20 }}>
      <input
        type="file"
        onChange={handleFileSelect}
        style={{ marginBottom: 20 }}
      />

      {selectedFile && (
        <div style={{ height: 600, border: "1px solid #ddd", borderRadius: 8 }}>
          <UniversalFilePreview
            file={selectedFile}
            onLoadError={(error) => {
              console.error("æ–‡ä»¶é¢„è§ˆå¤±è´¥:", error);
              alert("æ–‡ä»¶é¢„è§ˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ");
            }}
          />
        </div>
      )}
    </div>
  );
}
```

---

## ğŸ“š æ’ä»¶åˆ—è¡¨

æœ¬é¡¹ç›®æä¾› 15+ ä¸ªå¼€ç®±å³ç”¨çš„é¢„è§ˆæ’ä»¶ï¼ŒæŒ‰æ–‡ä»¶ç±»å‹åˆ†ç±»å¦‚ä¸‹ï¼š

### ğŸ“„ æ–‡æ¡£é¢„è§ˆæ’ä»¶

| æ’ä»¶                          | æ”¯æŒæ ¼å¼ | ä¸»è¦åŠŸèƒ½                          |
| ----------------------------- | -------- | --------------------------------- |
| `createPdfPreviewPlugin`      | PDF      | é¡µé¢å¯¼èˆªã€ç¼©æ”¾ã€æ–‡æœ¬é€‰æ‹©ã€æœç´¢    |
| `createDocxPreviewPlugin`     | DOCX     | æ–‡æ¡£æ¸²æŸ“ã€æ ·å¼ä¿æŒã€å›¾ç‰‡æ˜¾ç¤º      |
| `createXlsxPreviewPlugin`     | XLSX     | è¡¨æ ¼é¢„è§ˆã€å·¥ä½œè¡¨åˆ‡æ¢ã€æ•°æ®ç­›é€‰    |
| `createMarkdownPreviewPlugin` | MD       | Markdown æ¸²æŸ“ã€æ•°å­¦å…¬å¼ã€ä»£ç é«˜äº® |
| `createEpubPreviewPlugin`     | EPUB     | ç”µå­ä¹¦é˜…è¯»ã€ç« èŠ‚å¯¼èˆªã€å­—ä½“è°ƒèŠ‚    |

### ğŸ’» ä»£ç é¢„è§ˆæ’ä»¶

| æ’ä»¶                      | æ”¯æŒæ ¼å¼  | ä¸»è¦åŠŸèƒ½                           |
| ------------------------- | --------- | ---------------------------------- |
| `createCodePreviewPlugin` | 180+ è¯­è¨€ | è¯­æ³•é«˜äº®ã€è¡Œå·ã€ä»£ç æŠ˜å ã€ä¸»é¢˜åˆ‡æ¢ |
| `createJsonPreviewPlugin` | JSON      | ç»“æ„åŒ–æ˜¾ç¤ºã€æœç´¢ã€æŠ˜å ã€ä¸»é¢˜åˆ‡æ¢   |

### ğŸ“Š æ•°æ®é¢„è§ˆæ’ä»¶

| æ’ä»¶                     | æ”¯æŒæ ¼å¼ | ä¸»è¦åŠŸèƒ½                   |
| ------------------------ | -------- | -------------------------- |
| `createCsvPreviewPlugin` | CSV/TSV  | è¡¨æ ¼æ˜¾ç¤ºã€åˆ†é¡µã€æ’åºã€ç­›é€‰ |

### ğŸ–¼ï¸ åª’ä½“é¢„è§ˆæ’ä»¶

| æ’ä»¶                       | æ”¯æŒæ ¼å¼        | ä¸»è¦åŠŸèƒ½                     |
| -------------------------- | --------------- | ---------------------------- |
| `createImagePreviewPlugin` | JPG/PNG/GIF/SVG | ç¼©æ”¾ã€æ—‹è½¬ã€å…¨å±æŸ¥çœ‹         |
| `createVideoPreviewPlugin` | MP4/WebM/OGV    | æ’­æ”¾æ§åˆ¶ã€è¿›åº¦æ¡ã€éŸ³é‡è°ƒèŠ‚   |
| `createAudioPreviewPlugin` | MP3/WAV/OGG     | éŸ³é¢‘æ’­æ”¾ã€æ³¢å½¢æ˜¾ç¤ºã€æ’­æ”¾åˆ—è¡¨ |

### ğŸ—œï¸ å‹ç¼©åŒ…é¢„è§ˆæ’ä»¶

| æ’ä»¶                     | æ”¯æŒæ ¼å¼ | ä¸»è¦åŠŸèƒ½                   |
| ------------------------ | -------- | -------------------------- |
| `createZipPreviewPlugin` | ZIP      | æ–‡ä»¶åˆ—è¡¨ã€ç›®å½•æ ‘ã€æ–‡ä»¶æå– |

### ğŸ”§ é€šç”¨æ’ä»¶

| æ’ä»¶                        | è¯´æ˜         |
| --------------------------- | ------------ |
| `createDownloadPlugin`      | æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ |
| `createErrorBoundaryPlugin` | é”™è¯¯è¾¹ç•Œå¤„ç† |
| `createLoadingPlugin`       | åŠ è½½çŠ¶æ€æ˜¾ç¤º |

> ğŸ’¡ **æç¤º**ï¼šæ‰€æœ‰æ’ä»¶éƒ½å¯ä»¥é€šè¿‡ `vane-file-preview` åŒ…å¯¼å…¥ã€‚è¯¦ç»†é…ç½®è¯·å‚è€ƒ [API æ–‡æ¡£](#api-æ–‡æ¡£) æˆ–æŸ¥çœ‹ [åœ¨çº¿æ¼”ç¤º](https://chinavane.netlify.app/)ã€‚

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
vane-file-preview/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ FilePreviewPlugin/
â”‚   â”‚       â”œâ”€â”€ core/
â”‚   â”‚       â”‚   â””â”€â”€ FilePreviewCore.tsx    # æ ¸å¿ƒç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ plugins/
â”‚   â”‚       â”‚   â”œâ”€â”€ types.ts               # æ’ä»¶ç±»å‹å®šä¹‰
â”‚   â”‚       â”‚   â”œâ”€â”€ PluginBus.ts           # äº‹ä»¶æ€»çº¿
â”‚   â”‚       â”‚   â”œâ”€â”€ PluginManager.ts       # æ’ä»¶ç®¡ç†å™¨
â”‚   â”‚       â”‚   â”œâ”€â”€ withPlugins.tsx        # HOC ç»„åˆæ–¹æ³•
â”‚   â”‚       â”‚   â””â”€â”€ index.ts               # æ’ä»¶ç³»ç»Ÿå¯¼å‡º
â”‚   â”‚       â”œâ”€â”€ custom-plugins/             # 15+ è‡ªå®šä¹‰é¢„è§ˆæ’ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ PdfPreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ ImagePreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ JsonPreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ CodePreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ MarkdownPreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ DocxPreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ XlsxPreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ VideoPreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ AudioPreviewPlugin.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ ZipPreviewPlugin.tsx
â”‚   â”‚       â”‚   â””â”€â”€ ...
â”‚   â”‚       â””â”€â”€ index.ts                   # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ FilePreviewPlugin/
â”‚   â”‚       â””â”€â”€ Example.tsx                # æ¼”ç¤ºé¡µé¢
â”‚   â”œâ”€â”€ App.tsx                            # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ main.tsx                           # React å…¥å£
â”œâ”€â”€ public/                                # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ example.jpg
â”‚   â”œâ”€â”€ sample-data.csv
â”‚   â”œâ”€â”€ sample-config.json
â”‚   â”œâ”€â”€ test.docx
â”‚   â”œâ”€â”€ test.xlsx
â”‚   â”œâ”€â”€ typescript.pdf
â”‚   â””â”€â”€ ...
â”œâ”€â”€ dist/                                  # æ„å»ºäº§ç‰©
â”œâ”€â”€ vite.config.ts                         # Vite é…ç½®
â”œâ”€â”€ tsconfig.json                          # TypeScript é…ç½®
â””â”€â”€ package.json                           # é¡¹ç›®é…ç½®
```

---

## ğŸ”§ API æ–‡æ¡£

### FilePreviewCore

æ ¸å¿ƒæ–‡ä»¶é¢„è§ˆç»„ä»¶ï¼Œæä¾›åŸºç¡€çš„æ–‡ä»¶é¢„è§ˆèƒ½åŠ›ã€‚

#### Props

```typescript
interface FilePreviewCoreProps {
  // æ–‡ä»¶ä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰
  file: FileInfo;

  // ç”Ÿå‘½å‘¨æœŸå›è°ƒ
  onBeforeLoad?: () => Promise<boolean> | boolean;
  onLoadStart?: () => void;
  onLoadSuccess?: () => void;
  onLoadError?: (error: Error) => void;

  // æ¸²æŸ“å¢å¼º
  children?: React.ReactNode;

  // æ ·å¼
  containerStyle?: React.CSSProperties;
  containerClassName?: string;
  contentStyle?: React.CSSProperties;
  contentClassName?: string;

  // å¤–éƒ¨ refsï¼ˆä¾›æ’ä»¶ä½¿ç”¨ï¼‰
  containerRefExternal?: React.RefObject<HTMLDivElement | null>;
  contentRefExternal?: React.RefObject<HTMLDivElement | null>;
}

interface FileInfo {
  name: string; // æ–‡ä»¶å
  url: string; // æ–‡ä»¶ URL
  size?: number; // æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
  type?: string; // MIME ç±»å‹
}
```

#### Ref æ–¹æ³•

```typescript
interface FilePreviewCoreRef {
  reload: () => void; // é‡æ–°åŠ è½½æ–‡ä»¶
  reset: () => void; // é‡ç½®ç»„ä»¶çŠ¶æ€
  getState: () => PreviewStateInfo; // è·å–å½“å‰çŠ¶æ€
}
```

### withPlugins

é«˜é˜¶ç»„ä»¶ï¼Œç”¨äºä¸º FilePreviewCore æ·»åŠ æ’ä»¶åŠŸèƒ½ã€‚

```typescript
function withPlugins<T extends ComponentType<any>>(
  Component: T,
  plugins: Plugin[]
): ComponentType<ComponentProps<T>>;
```

#### ä½¿ç”¨ç¤ºä¾‹

```typescript
import {
  FilePreviewCore,
  withPlugins,
  createPdfPreviewPlugin,
} from "vane-file-preview";

const EnhancedFilePreview = withPlugins(FilePreviewCore, [
  createPdfPreviewPlugin({
    enableTextSelection: true,
    scale: 1.0,
  }),
]);
```

### æ’ä»¶é…ç½®

#### PDF é¢„è§ˆæ’ä»¶

```typescript
createPdfPreviewPlugin({
  enableTextSelection?: boolean;  // å¯ç”¨æ–‡æœ¬é€‰æ‹©ï¼Œé»˜è®¤ true
  scale?: number;                 // ç¼©æ”¾æ¯”ä¾‹ï¼Œé»˜è®¤ 1.0
  enableNavigation?: boolean;     // å¯ç”¨é¡µé¢å¯¼èˆªï¼Œé»˜è®¤ true
  enableSearch?: boolean;         // å¯ç”¨æœç´¢åŠŸèƒ½ï¼Œé»˜è®¤ true
})
```

#### JSON é¢„è§ˆæ’ä»¶

```typescript
createJsonPreviewPlugin({
  theme?: "light" | "dark" | "auto";  // ä¸»é¢˜ï¼Œé»˜è®¤ "auto"
  enableSearch?: boolean;             // å¯ç”¨æœç´¢ï¼Œé»˜è®¤ true
  collapsed?: boolean;                // é»˜è®¤æŠ˜å ï¼Œé»˜è®¤ false
  displayDataTypes?: boolean;         // æ˜¾ç¤ºæ•°æ®ç±»å‹ï¼Œé»˜è®¤ true
})
```

#### ä»£ç é¢„è§ˆæ’ä»¶

```typescript
createCodePreviewPlugin({
  theme?: string;                     // ä»£ç ä¸»é¢˜ï¼Œé»˜è®¤ "github"
  showLineNumbers?: boolean;          // æ˜¾ç¤ºè¡Œå·ï¼Œé»˜è®¤ true
  enableCodeFolding?: boolean;        // å¯ç”¨ä»£ç æŠ˜å ï¼Œé»˜è®¤ true
  wrapLongLines?: boolean;           // é•¿è¡Œæ¢è¡Œï¼Œé»˜è®¤ false
})
```

#### å›¾ç‰‡é¢„è§ˆæ’ä»¶

```typescript
createImagePreviewPlugin({
  enableZoom?: boolean;              // å¯ç”¨ç¼©æ”¾ï¼Œé»˜è®¤ true
  enableRotation?: boolean;          // å¯ç”¨æ—‹è½¬ï¼Œé»˜è®¤ true
  enableFullscreen?: boolean;        // å¯ç”¨å…¨å±ï¼Œé»˜è®¤ true
  maxZoom?: number;                  // æœ€å¤§ç¼©æ”¾æ¯”ä¾‹ï¼Œé»˜è®¤ 3
})
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ

```tsx
// ä¼ä¸šæ–‡æ¡£ç®¡ç†ç³»ç»Ÿ
const DocumentViewer = withPlugins(FilePreviewCore, [
  createPdfPreviewPlugin({ enableTextSelection: true }),
  createDocxPreviewPlugin({ preserveFormatting: true }),
  createXlsxPreviewPlugin({ enableFiltering: true }),
  createDownloadPlugin({ showDownloadButton: true }),
]);
```

### 2. ä»£ç å®¡æŸ¥å¹³å°

```tsx
// ä»£ç å®¡æŸ¥å·¥å…·
const CodeReviewer = withPlugins(FilePreviewCore, [
  createCodePreviewPlugin({
    theme: "vs-dark",
    showLineNumbers: true,
    enableCodeFolding: true,
  }),
  createJsonPreviewPlugin({ theme: "dark" }),
  createMarkdownPreviewPlugin({ enableMath: true }),
]);
```

### 3. åª’ä½“èµ„æºç®¡ç†

```tsx
// åª’ä½“æ–‡ä»¶ç®¡ç†å™¨
const MediaViewer = withPlugins(FilePreviewCore, [
  createImagePreviewPlugin({
    enableZoom: true,
    enableRotation: true,
  }),
  createVideoPreviewPlugin({
    controls: true,
    preload: "metadata",
  }),
  createAudioPreviewPlugin({
    showWaveform: true,
  }),
]);
```

### 4. æ•°æ®åˆ†æå·¥å…·

```tsx
// æ•°æ®æ–‡ä»¶é¢„è§ˆå™¨
const DataViewer = withPlugins(FilePreviewCore, [
  createCsvPreviewPlugin({
    enableSorting: true,
    enableFiltering: true,
    pageSize: 100,
  }),
  createJsonPreviewPlugin({
    enableSearch: true,
    displayDataTypes: true,
  }),
  createXlsxPreviewPlugin({
    enableSheetSwitching: true,
  }),
]);
```

---

## ğŸ”Œ è‡ªå®šä¹‰æ’ä»¶å¼€å‘

### æ’ä»¶æ¥å£

```typescript
interface Plugin {
  name: string;
  version: string;
  canHandle: (file: FileInfo) => boolean;
  render: (props: PluginRenderProps) => React.ReactNode;
  onMount?: (context: PluginContext) => void;
  onUnmount?: (context: PluginContext) => void;
}
```

### åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶

```typescript
import { Plugin, FileInfo } from "vane-file-preview";

export function createCustomPreviewPlugin(options = {}) {
  return {
    name: "CustomPreviewPlugin",
    version: "1.0.0",

    canHandle: (file: FileInfo) => {
      // åˆ¤æ–­æ˜¯å¦èƒ½å¤„ç†è¯¥æ–‡ä»¶ç±»å‹
      return file.type === "application/custom";
    },

    render: ({
      file,
      containerRef,
      onLoadStart,
      onLoadSuccess,
      onLoadError,
    }) => {
      // æ¸²æŸ“é¢„è§ˆå†…å®¹
      return (
        <div ref={containerRef}>
          <h3>è‡ªå®šä¹‰é¢„è§ˆï¼š{file.name}</h3>
          {/* è‡ªå®šä¹‰é¢„è§ˆé€»è¾‘ */}
        </div>
      );
    },

    onMount: (context) => {
      console.log("æ’ä»¶å·²æŒ‚è½½", context);
    },

    onUnmount: (context) => {
      console.log("æ’ä»¶å·²å¸è½½", context);
    },
  } as Plugin;
}
```

### ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶

```typescript
import { FilePreviewCore, withPlugins } from "vane-file-preview";
import { createCustomPreviewPlugin } from "./CustomPreviewPlugin";

const CustomFilePreview = withPlugins(FilePreviewCore, [
  createCustomPreviewPlugin({
    // æ’ä»¶é…ç½®é€‰é¡¹
  }),
]);
```

---

## ğŸŒŸ é«˜çº§ç‰¹æ€§

### ä¸»é¢˜ç³»ç»Ÿ

æ”¯æŒäº®è‰²ã€æš—è‰²å’Œè‡ªåŠ¨ä¸»é¢˜åˆ‡æ¢ï¼š

```tsx
// å…¨å±€ä¸»é¢˜é…ç½®
const ThemedFilePreview = withPlugins(FilePreviewCore, [
  createJsonPreviewPlugin({ theme: "auto" }),
  createCodePreviewPlugin({ theme: "vs-dark" }),
]);

// è¿è¡Œæ—¶ä¸»é¢˜åˆ‡æ¢
const [theme, setTheme] = useState("auto");

<ThemedFilePreview file={fileInfo} theme={theme} />;
```

### æ€§èƒ½ä¼˜åŒ–

#### æ‡’åŠ è½½

```tsx
// å¤§æ–‡ä»¶æ‡’åŠ è½½
const LazyFilePreview = withPlugins(FilePreviewCore, [
  createPdfPreviewPlugin({
    lazyLoading: true,
    pageBufferSize: 3,
  }),
]);
```

#### è™šæ‹Ÿæ»šåŠ¨

```tsx
// å¤§æ•°æ®é›†è™šæ‹Ÿæ»šåŠ¨
const VirtualizedPreview = withPlugins(FilePreviewCore, [
  createCsvPreviewPlugin({
    enableVirtualization: true,
    rowHeight: 40,
    overscan: 10,
  }),
]);
```

### é”™è¯¯å¤„ç†

```tsx
const RobustFilePreview = withPlugins(FilePreviewCore, [
  createErrorBoundaryPlugin({
    fallback: (error) => <div>é¢„è§ˆå¤±è´¥ï¼š{error.message}</div>,
  }),
  // å…¶ä»–æ’ä»¶...
]);
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# 1. Fork å¹¶å…‹éš†ä»“åº“
git clone https://github.com/your-username/vane-file-preview.git

# 2. å®‰è£…ä¾èµ–
cd vane-file-preview
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 4. è¿è¡Œæµ‹è¯•
npm test

# 5. æ„å»ºé¡¹ç›®
npm run build
```

### æäº¤è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```bash
# åŠŸèƒ½æ·»åŠ 
git commit -m "feat: æ·»åŠ  PowerPoint é¢„è§ˆæ’ä»¶"

# é—®é¢˜ä¿®å¤
git commit -m "fix: ä¿®å¤ PDF ç¼©æ”¾é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–° API æ–‡æ¡£"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf: ä¼˜åŒ–å¤§æ–‡ä»¶åŠ è½½æ€§èƒ½"
```

### æ’ä»¶å¼€å‘æŒ‡å—

1. åœ¨ `src/components/FilePreviewPlugin/custom-plugins/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ’ä»¶
2. å®ç° `Plugin` æ¥å£
3. æ·»åŠ ç›¸åº”çš„ç±»å‹å®šä¹‰
4. ç¼–å†™å•å…ƒæµ‹è¯•
5. æ›´æ–°æ–‡æ¡£å’Œç¤ºä¾‹

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](./LICENSE)ã€‚

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š

- [React](https://reactjs.org/) - UI æ¡†æ¶
- [TypeScript](https://www.typescriptlang.org/) - ç±»å‹å®‰å…¨
- [Vite](https://vitejs.dev/) - æ„å»ºå·¥å…·
- [PDF.js](https://mozilla.github.io/pdf.js/) - PDF æ¸²æŸ“
- [Highlight.js](https://highlightjs.org/) - ä»£ç é«˜äº®
- [React Markdown](https://github.com/remarkjs/react-markdown) - Markdown æ¸²æŸ“

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/frankvane/vane-file-preview/issues)
- **GitHub Discussions**: [å‚ä¸è®¨è®º](https://github.com/frankvane/vane-file-preview/discussions)
- **Email**: chinavane_2008@163.com

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ï¸**

[â¬†ï¸ å›åˆ°é¡¶éƒ¨](#-vane-file-preview)
